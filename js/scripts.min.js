window.wheelzoom=function(){function o(m,t){var u,s,d,l,c,v,g,o,n,a;function p(){0<v?v=0:v<s-l&&(v=s-l),0<g?g=0:g<d-c&&(g=d-c),m.style.backgroundSize=l+"px "+c+"px",m.style.backgroundPosition=v+"px "+g+"px"}function w(){l=s,c=d,v=g=0,p()}function r(e){var t=0;e.preventDefault(),e.deltaY?t=e.deltaY:e.wheelDelta&&(t=-e.wheelDelta);var o=m.getBoundingClientRect(),n=e.pageX-o.left-window.pageXOffset,a=e.pageY-o.top-window.pageYOffset,r=(n-v)/l,i=(a-g)/c;t<0?(l+=l*u.zoom,c+=c*u.zoom):(l-=l*u.zoom,c-=c*u.zoom),u.maxZoom&&(l=Math.min(s*u.maxZoom,l),c=Math.min(d*u.maxZoom,c)),v=n-l*r,g=a-c*i,(l<=s||c<=d?w:p)()}function i(e){e.preventDefault(),v+=e.pageX-o.pageX,g+=e.pageY-o.pageY,o=e,p()}function f(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",i)}function h(e){e.preventDefault(),o=e,document.addEventListener("mousemove",i),document.addEventListener("mouseup",f)}function b(){var e,t,o=Math.max(u.initialZoom,1);m.src!==n&&(e=window.getComputedStyle(m,null),s=parseInt(e.width,10),d=parseInt(e.height,10),c=d*o,v=-((l=s*o)-s)*u.initialX,g=-(c-d)*u.initialY,(t=m).style.backgroundRepeat="no-repeat",t.style.backgroundImage='url("'+t.src+'")',n="data:image/svg+xml;base64,"+window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+t.naturalWidth+'" height="'+t.naturalHeight+'"></svg>'),t.src=n,m.style.backgroundSize=l+"px "+c+"px",m.style.backgroundPosition=v+"px "+g+"px",m.addEventListener("wheelzoom.reset",w),m.addEventListener("wheel",r),m.addEventListener("mousedown",h))}m&&m.nodeName&&"IMG"===m.nodeName&&(u={},a=function(e){m.removeEventListener("wheelzoom.destroy",a),m.removeEventListener("wheelzoom.reset",w),m.removeEventListener("load",b),m.removeEventListener("mouseup",f),m.removeEventListener("mousemove",i),m.removeEventListener("mousedown",h),m.removeEventListener("wheel",r),m.style.backgroundImage=e.backgroundImage,m.style.backgroundRepeat=e.backgroundRepeat,m.src=e.src}.bind(null,{backgroundImage:m.style.backgroundImage,backgroundRepeat:m.style.backgroundRepeat,src:m.src}),m.addEventListener("wheelzoom.destroy",a),t=t||{},Object.keys(y).forEach(function(e){u[e]=void 0!==t[e]?t[e]:y[e]}),m.complete&&b(),m.addEventListener("load",b))}var y={zoom:.1,maxZoom:!1,initialZoom:1,initialX:.5,initialY:.5};return"function"!=typeof window.btoa?function(e){return e}:function(e,t){return e&&e.length?Array.prototype.forEach.call(e,function(e){o(e,t)}):e&&e.nodeName&&o(e,t),e}}(),function(e){wheelzoom(e(".map"),{maxZoom:3})}(jQuery);